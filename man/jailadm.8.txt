JAILADM(8)              FreeBSD System Manager's Manual             JAILADM(8)



NNAAMMEE
       jailadm - administer jails

SSYYNNOOPPSSIISS
       jjaaiillaaddmm --jj _j_a_i_l_n_a_m_e [--uu _u_u_i_d_-_m_a_t_c_h] _s_u_b_c_o_m_m_a_n_d
            [_s_u_b_c_o_m_m_a_n_d___o_p_t_i_o_n_s]


       jjaaiillaaddmm [--RR _r_o_o_t] [--jj _j_a_i_l_n_a_m_e] [--uu _u_u_i_d_-_m_a_t_c_h] list
            [_l_i_s_t___o_p_t_i_o_n_s]


       jjaaiillaaddmm [--RR _r_o_o_t] --jj _j_a_i_l_n_a_m_e [--uu _u_u_i_d_-_m_a_t_c_h] mark incomplete


DDEESSCCRRIIPPTTIIOONN
       The jjaaiillaaddmm utility is used to administer jails. A jail is an
       application container that is maintained by the operating system
       runtime.

SSEECCUURRIITTYY
       Once a process has been placed in a jail, the process or any of its
       children cannot change jails.

OOPPTTIIOONNSS
       The following options are supported:

       --RR _r_o_o_t

           Specify an alternate root (boot environment). This option can only
           be used in conjunction with the "lliisstt" and "mmaarrkk" subcommands.


       --uu _u_u_i_d_-_m_a_t_c_h

           Unique identifier for a jail, as assigned by lliibbuuuuiidd(3LIB). If this
           option is present and the argument is a non-empty string, then the
           jail matching the UUUUIIDD is selected instead of the one named by the
           --jj option, if such a jail is present.


       --jj _j_a_i_l_n_a_m_e

           String identifier for a jail.


SSUUBBCCOOMMMMAANNDDSS
       Subcommands which can result in destructive actions or loss of work
       have a --FF flag to force the action. If input is from a terminal device,
       the user is prompted if such a command is given without the --FF flag;
       otherwise, if such a command is given without the --FF flag, the action
       is disallowed, with a diagnostic message written to standard error. If
       a jail installation or uninstallation is interrupted, the jail is left
       in the incomplete state. Use uninstall to reset such a jail back to the
       configured state.


       The following subcommands are supported:

       aattttaacchh [--FF] [--nn _p_a_t_h] [_b_r_a_n_d_-_s_p_e_c_i_f_i_c _o_p_t_i_o_n_s]

           The aattttaacchh subcommand takes a jail that has been detached from one
           system and attaches the jail onto a new system. Therefore, it is
           advised (though not required) that the ddeettaacchh subcommand should be
           run before the "attach" takes place. Once you have the new jail in
           the configured state, use the aattttaacchh subcommand to set up the jail
           root instead of installing the jail as a new jail.

           The --FF option can be used to force the jail into the "installed"
           state with no validation. This option should be used with care
           since it can leave the jail in an unsupportable state if it was
           moved from a source system to a target system that is unable to
           properly host the jail. The --nn option can be used to run the aattttaacchh
           subcommand, without executing the command. It uses the output of
           the "ddeettaacchh --nn" subcommand as input and is useful to identify any
           conflicting issues, such as the network device being incompatible,
           and can also determine whether the host is capable of supporting
           the jail. The path can be "--", to read the input from standard
           input.

           The jail's brand may include additional options that govern how the
           jail will be attached. See bbrraannddss(5) for specific brand
           information.

           The jail being attached must first be configured using the jjaaiillccffgg
           (see jjaaiillccffgg(1M)) command. This does not apply when running "aattttaacchh
           --nn".

           Use the following command to attach a jail:

             # jjaaiillaaddmm --jj mmyy--jjaaiill aattttaacchh




       bboooott [---- _b_o_o_t___o_p_t_i_o_n_s]

           Boot (or activate) the specified jails.

           The following _b_o_o_t___o_p_t_i_o_n_s are supported:

           --ii _a_l_t_i_n_i_t

               Select an alternative executable to be the primordial Process.
               _a_l_t_i_n_i_t is a valid path to an executable. The default
               primordial process is iinniitt(1M).




       cclloonnee [--mm _c_o_p_y] [--ss _z_f_s___s_n_a_p_s_h_o_t] _s_o_u_r_c_e___j_a_i_l

           Install a jail by copying an existing installed jail. This
           subcommand is an alternative way to install the jail.

           --mm _c_o_p_y

               Force the clone to be a copy, even if a "ZZFFSS clone" is
               possible.


           --ss _z_f_s___s_n_a_p_s_h_o_t

               Specify the name of a ZZFFSS snapshot to use as the source of the
               clone. The _s_n_a_p_s_h_o_t must be a _s_n_a_p_s_h_o_t of the source jail taken
               from a previous "jjaaiillaaddmm clone" installation.

           The source jail must be halted before this subcommand can be used.


       ddeettaacchh [--nn]

           Detach the specified jail. Detaching a jail is the first step in
           moving a jail from one system to another. The full procedure to
           migrate a jail is that the jail is detached, the _j_a_i_l_p_a_t_h directory
           is moved to the new host, and then the jail is attached on the new
           host. Once the jail is detached, it is left in the configured
           state. If you try to install or clone to a configured jail that has
           been detached, you will receive an error message and the iinnssttaallll or
           cclloonnee subcommand will not be allowed to proceed. The --nn option can
           be used to run the ddeettaacchh subcommand, without executing the
           command. This generates the information needed for running the
           "aattttaacchh --nn" subcommand, which is useful to identify any conflicting
           issues, such as the network device being incompatible or if the
           host is capable of supporting the jail. The information is sent to
           standard output and can be saved to a file or piped to the "aattttaacchh
           --nn" subcommand.

           Use the following command to detach a jail:

             # jailadm -j my-jail detach


           The source jail must be halted before this subcommand can be used.


       hhaalltt

           Halt the specified jails. hhaalltt bypasses running the shutdown
           scripts inside the jail. It also removes run time resources of the
           jail.


       hheellpp [_s_u_b_c_o_m_m_a_n_d]

           Display general help. If you specify _s_u_b_c_o_m_m_a_n_d, displays help on
           _s_u_b_c_o_m_m_a_n_d.


       iinnssttaallll [--xx _n_o_d_a_t_a_s_e_t] [_b_r_a_n_d_-_s_p_e_c_i_f_i_c _o_p_t_i_o_n_s]

           Install the specified jail on the system. This subcommand
           automatically attempts to verify first, most verification errors
           are fatal. See the vveerriiffyy subcommand.

           --xx _n_o_d_a_t_a_s_e_t

               Do not create a ZZFFSS file system.

           The jail's brand may include additional options that govern how the
           software will be installed in the jail. See bbrraannddss(5) for specific
           brand information.


       lliisstt [_l_i_s_t___o_p_t_i_o_n_s]

           Display the name of the current jails, or the specified jail if
           indicated.

           By default, all running jails are listed. If you use this
           subcommand with the jjaaiillaaddmm --jj _j_a_i_l_n_a_m_e option, it lists only the
           specified jail, regardless of its state. In this case, the --ii and
           --cc options are disallowed.

           If neither the --ii or --cc options are given, all running jails are
           listed.

           The following _l_i_s_t___o_p_t_i_o_n_s are supported:

           --cc

               Display all configured jails. This option overides the --ii
               option.


           --ii

               Expand the display to all installed jails.


           --pp

               Request machine parsable output. The output format is a list of
               lines, one per jail, with colon- delimited fields. These fields
               are:

                 jailid:jailname:state:jailpath:uuid:brand:ip-type


               If the jjaaiillppaatthh contains embedded colons, they can be escaped
               by a backslash (""), which is parsable by using the shell
               rreeaadd(1) function with the environmental variable IIFFSS. The _u_u_i_d
               value is assigned by lliibbuuuuiidd(3LIB) when the jail is installed,
               and is useful for identifying the same jail when present (or
               renamed) on alternate boot environments. Any software that
               parses the output of the "jjaaiillaaddmm lliisstt --pp" command must be able
               to handle any fields that may be added in the future.

               The --vv and --pp options are mutually exclusive. If neither --vv nor
               --pp is used, just the jail name is listed.


           --vv

               Display verbose information, including jail name, id, current
               state, root directory, brand type, ip-type, and options.

               The --vv and --pp options are mutually exclusive. If neither --vv nor
               --pp is used, just the jail name is listed.



       mmaarrkk iinnccoommpplleettee

           Change the state of an installed jail to "incomplete." This command
           may be useful in cases where administrative changes on the system
           have rendered a jail unusable or inconsistent. This change cannot
           be undone (except by uninstalling the jail).


       mmoovvee _n_e_w___j_a_i_l_p_a_t_h

           Move the _j_a_i_l_p_a_t_h to _n_e_w___j_a_i_l_p_a_t_h. The jail must be halted before
           this subcommand can be used. The _n_e_w___j_a_i_l_p_a_t_h must be a local file
           system and normal restrictions for _j_a_i_l_p_a_t_h apply.


       rreeaaddyy

           Prepares a jail for running applications but does not start any
           user processes in the jail.


       rreebboooott [---- _b_o_o_t___o_p_t_i_o_n_s]]

           Restart the jails. This is equivalent to a hhaalltt bboooott sequence. This
           subcommand fails if the specified jails are not active. See _b_o_o_t
           subcommand for the boot options.


       sshhuuttddoowwnn [--rr [---- _b_o_o_t___o_p_t_i_o_n_s]]

           Gracefully shutdown the specified jail. This subcommand waits for
           all jail processes to finish; the default timeout is
           SCF_PROPERTY_TIMEOUT value from the SMF service system/jails. If
           the --rr option is specified, reboot the jail. See _b_o_o_t subcommand
           for the boot options.


       uunniinnssttaallll [[--FF]]

           Uninstall the specified jail from the system. Use this subcommand
           with caution.  It removes all of the files under the _j_a_i_l_p_a_t_h of
           the jail in question.  You can use the --FF flag to force the action.


       vveerriiffyy

           Check to make sure the configuration of the specified jail can
           safely be installed on the machine. Following is a break-down of
           the checks by rreessoouurrccee//pprrooppeerrttyy type:

           jjaaiillppaatthh

               jjaaiillppaatthh and its parent directory exist and are owned by root
               with appropriate modes . The appropriate modes are that
               jjaaiillppaatthh is 770000, its parent is not ggrroouupp or wwoorrlldd--wwrriittaabbllee and
               so forth.  jjaaiillppaatthh is not over an NFS mount. A sub-directory
               of the jjaaiillppaatthh named "root" does not exist.

               If jjaaiillppaatthh does not exist, the vveerriiffyy does not fail, but
               merely warns that a subsequent install will attempt to create
               it with proper permissions. A vveerriiffyy subsequent to that might
               fail should anything go wrong.

               jjaaiillppaatthh cannot be a symbolic link.


           ffss

               Any ffss resources have their _t_y_p_e value checked. An error is
               reported if the value is one of pprroocc, mmnnttffss, aauuttooffss, or nnffss or
               the filesystem does not have an associated mount binary at
               //uussrr//lliibb//ffss//_<_f_s_t_y_p_e_>/mount.

               It is an error for the _d_i_r_e_c_t_o_r_y to be a relative path.

               It is an error for the path specified by rraaww to be a relative
               path or if there is no ffsscckk binary for a given filesystem type
               at //uussrr//lliibb//ffss//_<_f_s_t_y_p_e_>/fsck. It is also an error if a
               corresponding ffsscckk binary exists but a rraaww path is not
               specified.


           nneett

               All physical network interfaces exist. All network address
               resources are one of:

                   o      a valid IPv4 address, optionally followed by "//" and
                          a prefix length;

                   o      a valid IPv6 address, which must be followed by "//"
                          and a prefix length;

                   o      a host name which resolves to an IPv4 address.
               Note that hostnames that resolve to IPv6 addresses are not
               supported.

               The physical interface name is the network interface name.

               A jail can be configured to be either exclusive-IP or shared-
               IP. For a shared-IP jail, both the physical and address
               properties must be set. For an exclusive-IP jail, the physical
               property must be set and the address property cannot be set.


           rrccttll

               It also verifies that any defined resource control values are
               valid on the current machine. This means that the privilege
               level is pprriivviilleeggeedd, the limit is lower than the currently
               defined system value, and that the defined action agrees with
               the actions that are valid for the given resource control.



EEXXAAMMPPLLEESS
       EExxaammppllee 11 Using the --mm Option


       The following command illustrates the use of the --mm option.


         # jjaaiillaaddmm bboooott ---- --mm vveerrbboossee



       EExxaammppllee 22 Using the --ii Option


       The following command illustrates the use of the --ii option.


         # jjaaiillaaddmm bboooott ---- --ii //ssbbiinn//iinniitt



       EExxaammppllee 33 Using the --ss Option


       The following command illustrates the use of the --ss option.


         # jjaaiillaaddmm bboooott ---- --ss



EEXXIITT SSTTAATTUUSS
       The following exit values are returned:

       00

           Successful completion.


       11

           An error occurred.


       22

           Invalid usage.


SSEEEE AALLSSOO
       rreeaadd(1), ssvvccss(1), zzllooggiinn(1), jjaaiillnnaammee(1), iinniitt(1M), kkeerrnneell(1M),
       ssvvccaaddmm(1M), ssvvcc..ssttaarrttdd(1M), ssvvcc..ssttaarrttdd(1M), jjaaiillccffgg(1M), lliibbuuuuiidd(3LIB),
       aattttrriibbuutteess(5), bbrraannddss(5), nnaattiivvee(5), ssmmff(5), jjaaiillss(5)


SSTTAANNDDAARRDDSS
       The jjaaiillaaddmm(8) command is specific to FreeBSD and does not conform to
       any published standards.

HHIISSTTOORRYY
       The jjaaiillaaddmm(8) command is based on the zoneadm(1M) command that first
       appeared in Sun Solaris version 10 .



                               September 8, 2015                    JAILADM(8)
